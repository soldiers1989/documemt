# 单实例内存预存储功能项

对于需要频繁查询、且查询结果数据量较少的结果集，放在了每一台服务器本身的内存里。

```
添加内存缓存的原则：频繁调用、结果集较小、使用广泛
```

### 清理缓存请求描述

管理端提供了一个隐藏的接口，可以统一进行重新加载。

| 名 | 值 |
| :--- | :--- |
|url|<服务器地址>/nggirl-web/web/admin/common/memdata/reload?expireKey=<要重新加载的expireKey>|
|请求方式|GET|

### expireKey

| 名 | 值 |nggirl项目缓存中是否有该key|nggirl-web项目缓存中是否有该key|
| :--- | :--- | :---: |:---: |
|O2OCityArea|O2O功能的城市和城区|√|√|
|ItemProvinceCityArea|电商相关的省市区|√|√|
|AppVersion|当前app最新版本|√||
|ReservationDate|系统可预约时间段|√||
|UserinfoSensitiveWords|用户昵称敏感字|√||
|SysItemCategroyKey|电商全部分类信息||√|
|allSysMenus|管理后台系统菜单||√|
|allSysResources|管理后台全部资源||√|
|allSysRoles|管理后台全部角色||√|



* [后台没有更新缓存触发点的预存储](#1)
  * [1.1系统支持的城市](#1.1)
  * [1.2系统支持的城区](#1.2)
  * [1.4系统可预约时间段](#1.4)
  * [1.5当前app最新版本](#1.5)



<h2 id="1">后台没有更新缓存触发点的预存储</h2>

>这些信息一般变更没有那么频繁，并且管理后台没有相应的管理页面，暂时只有使用重启服务器的方式触发缓存重新加载

<h3 id="1.1">1.1系统支持的城市</h3>

| 名 | 值 |
| :--- | :--- |
|使用的地方|美妆页面的城市选择、化妆师页面的城市选择、录入个人信息的城市选择、录入常用地址的城市选择|

<h3 id="1.2">1.2系统支持的城区</h3>

| 名 | 值 |
| :--- | :--- |
|使用的地方|当前已不再使用|


<h3 id="1.3">1.3系统可预约时间段</h3>

| 名 | 值 |
| :--- | :--- |
|使用的地方|化妆师日程编辑、美妆专题筛选、作品详情、下单页面|

<h3 id="1.4">1.4当前app最新版本</h3>

| 名 | 值 |
| :--- | :--- |
|使用的地方|app查询最新版本，弹窗提示更新|
